# Инструкция для установки докера
В инструкции будет расписан минимальная установка и запуск докера




# Установка

Выполните установку docker по данной инструкции 

```
https://docs.docker.com/engine/install/ubuntu/
```
Нужно выполнить только установку. Результатом успешной установки будет выполненая команда docker -v которая покажет версию

Чтобы получить самую последнюю стабильную версию Docker Compose, мы загрузим это программное обеспечение из официального репозитория Github.

Для начала проверьте, какая последняя версия доступна на странице релизов. На момент написания настоящего документа наиболее актуальной стабильной версией является версия 1.26.0.

Следующая команда загружает версию 1.26.0 и сохраняет исполняемый файл в каталоге /usr/local/bin/docker-compose, в результате чего данное программное обеспечение будет глобально доступно под именем docker-compose:

```
sudo curl -L "https://github.com/docker/compose/releases/download/1.26.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
```

Выполнив команду мы получим пакет докера. Затем необходимо задать правильные разрешения, чтобы сделать команду docker-compose исполняемой:

```
sudo chmod +x /usr/local/bin/docker-compose
```

Чтобы проверить успешность установки, запустите следующую команду:

```
docker-compose --version
```

Вывод будет выглядеть следующим образом:

```
docker-compose version 1.26.0, build 8a1c60f6
```

# Запуск

Выгружаем данный репозиторий в отдельную папку для докеров. Что бы не копировать проект целиком

При первом запуске вам нужно выполнить команду build что бы конфиг развернул все зависимости установил пакеты и скопировал ваш проект

## ВАЖНО!

В проекте есть файл конфига докера Dockerfile5.6.txt . Этот конфиг нужен если вы используете версию php 5.6. Перед его использованием. Переименнуйте файл Dockerfile, а затем переименнуйте Dockerfile5.6.txt > Dockerfile

## Устновка переменных окружения

В репозитории есть файл .env тут храняться переменные докера. В данный момент там только одна переменная. COMPOSE_PROJECT_NAME. Её нужно обязательно менять перед запуском другого контейнера. Т.е у вас не должно быть в системе одинаковых названий контейнеров.

Ниже код который нужно сделать что бы переменные применились

```
set -a
source .my-env

```

После чего приступаем к следующему шагу

Все переменные докера вы можете найти на этом сайте

```
https://docs.docker.com/compose/reference/envvars/
```

## Команда build
Команда билд выполняем в папке с докерамаи(что бы не копировать весь проект)
```
docker-compose build
```

После установки больше команду билд не запускаем. Копируем все файлы из папки с докерами в папку с проектом. И в дальнейшем запускаем всё в папке проекта

## Команда up запуск

Запускает контейнер без установки зависимостей
```
docker-compose up -d
```

## Команда stop
Что бы остановить наш контейнер используйте команду down

```
docker-compose down
```

Остановить текущий контейнер в рабочей области

## Команда restart

Перезапускает контейнер

```
docker-compose restart
```

## Запуск консоли внутри контейнера

Команда нужна если вам нужно выполнить манипуляции с командной строкой. Например обновить зависимости композера. Внимание! Просто выполнение из терминала вне контейнера может не принести результата

```

 docker exec -it app bash

```

## Настройка nginx

Что бы настроить веб сервер надо перейти в папку 
```
/nginx/conf.d/app.conf
```
Тут надо указать в переменной server_name название сайта по которому будет можно зайти на страницу. Так же можно зайти по localhost

## phpmyadmin MYSQL

Что бы попасть в phpmyadmin базу данных перейдите по пути

```
localhost:8081
```
В поле сервер введите ip компьютера
Логин root пароль указан в файле docker-compose.yml #MySQL Service
# Материалы и источники

```
https://docs.docker.com/compose/
```

```
https://google.com
```

## Удачи!:-)